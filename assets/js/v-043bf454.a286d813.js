"use strict";(self.webpackChunkMysql_Learn=self.webpackChunkMysql_Learn||[]).push([[407],{5129:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-043bf454",path:"/guide/%E3%80%8AMysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B/%E9%99%84%E5%BD%95C%EF%BC%9AMysql%20%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%A1%88%E4%BE%8B.html",title:"附录C：Mysql 存储过程案例",lang:"en-US",frontmatter:{title:"附录C：Mysql 存储过程案例",lang:"en-US"},excerpt:"",headers:[{level:2,title:"案例：随机生成10000条数据",slug:"案例-随机生成10000条数据",children:[{level:3,title:"随机数生成函数",slug:"随机数生成函数",children:[]},{level:3,title:"随机字符串生成函数",slug:"随机字符串生成函数",children:[]},{level:3,title:"生成 dept1 表格数据",slug:"生成-dept1-表格数据",children:[]},{level:3,title:"生成 emp1 表格数据",slug:"生成-emp1-表格数据",children:[]}]}],filePathRelative:"guide/《Mysql必知必会》/附录C：Mysql 存储过程案例.md",git:{updatedTime:1635847604e3,contributors:[{name:"Sue-52",email:"1219243947@qq.com",commits:1}]}}},3802:(n,s,a)=>{a.r(s),a.d(s,{default:()=>r});const e=(0,a(6252).uE)('<h2 id="案例-随机生成10000条数据" tabindex="-1"><a class="header-anchor" href="#案例-随机生成10000条数据" aria-hidden="true">#</a> 案例：随机生成10000条数据</h2><p>创建表格：</p><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>create table dept1(\n  id int unsigned primary key auto_increment,\n  deptno mediumint unsigned not null default 0,\n  dname varchar(20) not null default &quot;&quot;,\n  loc varchar(13) not null default &quot;&quot;\n)engine=innodb default charset=gbk;\n\ncreate table emp1(\n  id int unsigned primary key auto_increment,\n  empno mediumint unsigned not null default 0,/*编号*/\n  ename varchar(20) not null default &quot;&quot;,/*姓名*/\n  job varchar(9) not null default &quot;&quot;,/*工作*/\n  mgr mediumint unsigned not null default 0,/*上级编号*/\n  hiredate date not null,/*入职时间*/\n  sal decimal(7,2) not null, /*薪水*/\n  comm decimal(7,2) not null,/*红利*/\n  deptno mediumint unsigned not null default 0/*部门编号*/\n)engine=innodb default charset=gbk;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="随机数生成函数" tabindex="-1"><a class="header-anchor" href="#随机数生成函数" aria-hidden="true">#</a> 随机数生成函数</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DEFINER=`root`@`localhost` FUNCTION `mysql_deep_learning`.`RandomNum`() RETURNS int\nBEGIN\n  \tDECLARE i INT DEFAULT 0;\n\n    set i = FLOOR(100+RAND()*(10 - 1 + 1) + 1);\n\n    RETURN i;\n   \nEND\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="随机字符串生成函数" tabindex="-1"><a class="header-anchor" href="#随机字符串生成函数" aria-hidden="true">#</a> 随机字符串生成函数</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DEFINER=`root`@`localhost` FUNCTION `mysql_deep_learning`.`RandomStr`(n int) RETURNS varchar(255) CHARSET utf8mb4\nBEGIN\n\t\n\tDECLARE char_str varchar(100) DEFAULT &#39;abcdefghijklmnopqrstuvwsyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;;\n\tDECLARE return_str VARCHAR(255) DEFAULT &#39;&#39;;\n\tDECLARE i int DEFAULT 0;\n\t\n\tWHILE i&lt;n DO\n\t\tSET return_str = CONCAT(return_str,SUBSTRING(char_str FROM FLOOR(1+RAND()*52) FOR 1));\n\t\tSET i = i+1;\n\tEND WHILE;\n\n    RETURN return_str;\nEND\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="生成-dept1-表格数据" tabindex="-1"><a class="header-anchor" href="#生成-dept1-表格数据" aria-hidden="true">#</a> 生成 dept1 表格数据</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DEFINER=`root`@`localhost` PROCEDURE `mysql_deep_learning`.`CreateDataOfDept`(`start` int(10),max_num int(10))\nBEGIN\n\tDECLARE i int DEFAULT 0;\n\tSET autocommit = 0;\n\t\n\tREPEAT \n\t\tSET i = i + 1;\n\t\tINSERT INTO dept1 (deptno,dname,loc) VALUES ((`start` + i),RandomStr(10),RandomStr(8));\n\t\tuntil i = max_num\n\tEND REPEAT;\n\t\n\tCOMMIT;\n\nEND\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="生成-emp1-表格数据" tabindex="-1"><a class="header-anchor" href="#生成-emp1-表格数据" aria-hidden="true">#</a> 生成 emp1 表格数据</h3><div class="language-mysql ext-mysql line-numbers-mode"><pre class="language-mysql"><code>CREATE DEFINER=`root`@`localhost` PROCEDURE `mysql_deep_learning`.`CreateDataOfEmp`(`start` int(10),max_num int(10))\nBEGIN\n\tDECLARE i int DEFAULT 0;\n\tSET autocommit = 0;\n\n\tREPEAT \n\t\tSET i = i + 1;\n\t\tINSERT INTO emp1 (empno,ename,job,mgr,hiredate,sal,comm,deptno) \n\t\tVALUES ((`start` + i),RandomStr(6),&#39;saleman&#39;,0001,CURDATE(),2000,400,RandomNum());\n\t\tuntil i = max_num\n\tEND REPEAT;\n\n\tCOMMIT;\n\nEND\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>',11),l={},r=(0,a(3744).Z)(l,[["render",function(n,s){return e}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}}}]);